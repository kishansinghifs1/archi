# syntax=docker/dockerfile:1
FROM localhost/a2rchi/a2rchi-pytorch-base:latest 
RUN mkdir -p /root/archi
WORKDIR /root/archi

COPY LICENSE LICENSE


RUN apt-get update && apt-get install -y \
    nvidia-utils-550 \
    libnvidia-compute-550 \
    && rm -rf /var/lib/apt/lists/*

COPY archi_code src
COPY configs configs
COPY pyproject.toml pyproject.toml
COPY weblists weblists
RUN pip install --upgrade pip && pip install .

CMD ["python", "-u", "src/bin/service_mailbox.py"]
